<html><head><base href="/" /><style>
* { margin: 0; padding: 0; box-sizing: border-box; }

.game {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    position: relative;
    background: linear-gradient(#87CEEB, #E0F6FF);
}

.game.spring {
    background: linear-gradient(#87CEEB, #98FB98);
}

.game.summer {
    background: linear-gradient(#FF8C00, #FFD700);
}

.game.fall {
    background: linear-gradient(#D2691E, #DEB887);
}

.game.winter {
    background: linear-gradient(#B0C4DE, #F0F8FF);
}

.character {
    width: 120px;
    height: 80px;
    position: absolute;
    bottom: 0;
    left: 20px; /* Changed from 50px to move car more to left */
    transition: transform 0.1s, bottom 0.1s; /* Add bottom transition */
    z-index: 2;
    cursor: pointer;
    background-image: url('/IMG_1224.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

.character.transition {
  transition: left 2s ease-in;
  z-index: 1000;
}

.character.exploding {
    animation: explode 1s forwards;
}

.company-name {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    font-family: Arial, sans-serif;
    font-size: 10px;
    font-weight: bold;
    color: #333;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
    pointer-events: none;
}

.ground {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100px;
    background: #444444;
    overflow: hidden;
}

.cityscape {
    position: absolute;
    bottom: 100px; /* Above the ground */
    width: 200%;
    height: 200px;
    animation: slideBackground 20s linear infinite;
    display: flex;
    will-change: transform;  /* Add this for better performance */
}

.cityscape-container {
    min-width: 100%;
    position: relative;
    height: 100%;
    will-change: transform;  /* Add this for better performance */
}

.cityscape-container svg {
    position: absolute;
    bottom: 0;
    transform-origin: bottom;
}

.cityscape-container:nth-child(2) {
    transform: translateX(100%);
}

.building {
    position: absolute;
    bottom: 0;
    background: #666;
    width: 60px;
    height: 120px;
}

.tree {
    position: absolute;
    bottom: 0;
    width: 40px;
    height: 60px;
}

.road-lines {
    position: absolute;
    width: 200%;
    height: 100%;
    display: flex;
    animation: moveRoad 10s linear infinite;
}

.road-line {
    width: 80px;
    height: 10px;
    background: #ffffff;
    margin: 45px 100px;
}

@keyframes moveRoad {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
}

.background {
    position: absolute;
    width: 200%;
    height: 100%;
    background-repeat: repeat-x;
    animation: slideBackground 20s linear infinite;
}

.cloud {
    position: absolute;
    fill: white;
    opacity: 0.9;
    animation: slideBackground 20s linear infinite;
}

.enemy {
    width: 40px;
    height: 40px;
    position: absolute;
    bottom: 0;
    right: -50px;
    z-index: 1;
    transition: all 0.3s ease;
    transform-origin: center;
}

.enemy.destroyed {
    transform: scale(1.5) rotate(360deg);
    opacity: 0;
    filter: brightness(2);
}

.enemy svg {
    width: 100%;
    height: 100%;
    animation: wobble 2s infinite alternate ease-in-out;
}

@keyframes wobble {
    0% { transform: translateY(0); }
    100% { transform: translateY(-5px); }
}

.modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    z-index: 1000;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    display: none;
}

.modal button {
    padding: 10px 20px;
    background: #ff0000;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
}

.modal button:hover {
    background: #cc0000;
}

.score {
    position: fixed;
    top: 20px;
    right: 20px;
    font-size: 24px;
    color: #333;
    background: rgba(255, 255, 255, 0.8);
    padding: 10px;
    border-radius: 5px;
    z-index: 1000;
}

.bubble {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(135, 206, 235, 0.7);
    z-index: 3;
    animation: float 1s linear;
    transform-origin: left center; /* Add this to ensure proper positioning */
}

@keyframes float {
    0% { transform: scale(0.5); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

@keyframes slideBackground {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
}

.mobile-controls {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-items: center;
}

.control-btn {
    width: 80px;  
    height: 80px; 
    border-radius: 50%; 
    background: rgba(255, 255, 255, 0.7);
    border: 2px solid #333;
    font-size: 32px; 
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
}

.control-btn:active {
    background: rgba(200, 200, 200, 0.7);
}

.shoot-control {
    position: fixed;
    bottom: 20px;
    left: 20px;  /* Position on left side */
    z-index: 1000;
}

.shoot-btn {
    background: rgba(135, 206, 235, 0.7);  /* Light blue tint */
}

.shoot-btn:active {
    background: rgba(100, 180, 220, 0.7);
}

.start-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

.start-menu-content {
    background: rgba(255, 255, 255, 0.9);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
}

.music-control {
    margin: 5px 0;  /* Reduce margin */
    gap: 5px;      /* Reduce gap */
}

.music-toggle {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid #333;  /* Thinner border */
    padding: 5px 10px;      /* Smaller padding */
    border-radius: 3px;     /* Smaller border radius */
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 3px;
    font-size: 14px;       /* Smaller font size */
}

.music-toggle:hover {
    background: rgba(235, 235, 235, 0.9);
}

.music-toggle.off {
    background: rgba(200, 200, 200, 0.9);
}

.level-selection {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    padding: 20px;
}

.level-card {
    position: relative;
    min-height: 180px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    background-size: cover !important;
    background-position: center !important;
    color: white;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

.level-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.4);
    z-index: 0;
}

.level-card > * {
    position: relative;
    z-index: 1;
}

.stars {
    margin-top: 10px;
}

.star {
    font-size: 24px;
    color: #FFD700;
    animation: starPulse 1s infinite;
}

@keyframes starPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.success-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
    z-index: 2000;
    display: none;
}

.pause-button {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1000;
    padding: 10px;
    font-size: 24px;
    background: rgba(255, 255, 255, 0.8);
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.pause-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

.pause-menu-content {
    background: rgba(255, 255, 255, 0.9);
    padding: 30px;
    border-radius: 15px;
    text-align: center;
}

.level-transition {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  z-index: 999;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.5s;
}

.level-transition.active {
  opacity: 1;
}

.weather {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

.rain-drop {
    position: absolute;
    width: 2px;
    height: 20px;
    background: rgba(174, 194, 224, 0.5);
    animation: rain 1s linear infinite;
}

.snow-flake {
    position: absolute;
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    animation: snow 3s linear infinite;
}

.sun {
    position: absolute;
    top: 40px;
    right: 40px;
    width: 80px;
    height: 80px;
    background: #FFD700;
    border-radius: 50%;
    box-shadow: 0 0 50px #FF8C00;
    animation: glow 2s infinite alternate;
}

.leaf {
    position: absolute;
    width: 20px;
    height: 20px;
    animation: falling 6s linear infinite; /* Increased from 3s to 6s */
    pointer-events: none;
    background: none; /* Remove background color */
}

/* Add new falling animation with swaying motion */
@keyframes falling {
    0% {
        transform: translate(0, -100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    25% {
        transform: translate(50px, -50vh) rotate(90deg);
    }
    50% {
        transform: translate(-30px, 0vh) rotate(180deg);
    }
    75% {
        transform: translate(50px, 50vh) rotate(270deg);
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translate(-20px, 100vh) rotate(360deg);
        opacity: 0;
    }
}

@keyframes rain {
    0% { transform: translateY(-100vh); }
    100% { transform: translateY(100vh); }
}

@keyframes snow {
    0% { transform: translate(0, -100vh) rotate(0deg); }
    100% { transform: translate(20px, 100vh) rotate(360deg); }
}

@keyframes glow {
    0% { box-shadow: 0 0 50px #FF8C00; }
    100% { box-shadow: 0 0 80px #FF8C00; }
}

@keyframes falling {
    0% { transform: translate(0, -100vh) rotate(0deg); }
    10% { opacity: 1; }
    25% { transform: translate(50px, -50vh) rotate(90deg); }
    50% { transform: translate(-30px, 0vh) rotate(180deg); }
    75% { transform: translate(50px, 50vh) rotate(270deg); }
    90% { opacity: 1; }
    100% { transform: translate(-20px, 100vh) rotate(360deg); opacity: 0; }
}

.level-start-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.9);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    z-index: 1000;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    display: none;
}

.level-start-modal button {
    padding: 10px 20px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
}

.level-start-modal button:hover {
    background: #0056b3;
}

@keyframes explode {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.5);
        opacity: 0.5;
    }
    100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* Add new styles for the splash screen */
.splash-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, #1a2a6c, #b21f1f, #fdbb2d);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 3000;
    animation: gradientBG 10s ease infinite;
}

.splash-content {
    text-align: center;
    padding: 30px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

.splash-content h1 {
    font-size: 2em;
    color: #333;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

.splash-content button {
    padding: 15px 40px;
    font-size: 1.2em;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    transition: transform 0.3s, background 0.3s;
}

.splash-content button:hover {
    transform: scale(1.05);
    background: #45a049;
}

@keyframes gradientBG {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Remove the h1 from start-menu-content */
.start-menu-content h1 {
    display: none;
}

/* Add these styles for the celebration modal */
.celebration-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 3000;
}

.celebration-content {
    position: relative;
    background: rgba(255, 255, 255, 0.95);
    padding: 40px;
    border-radius: 15px;
    text-align: center;
    max-width: 90%;
    width: 400px;
}

.discount-code {
    font-size: 24px;
    font-weight: bold;
    background: #f0f0f0;
    padding: 15px;
    margin: 20px 0;
    border-radius: 8px;
    border: 2px dashed #333;
}
</style></head><body>
<audio id="backgroundMusic" loop>
  <source src="Hisar Temizlik.mp3" type="audio/mpeg">
</audio>
<audio id="laserSound">
  <source src="/laser_S5c8iCH.mp3" type="audio/mpeg">
</audio>
<audio id="loseSound">
  <source src="/Videogame Lose Sound Effect HD _ No Copyright - CoolSoundFX.mp3" type="audio/mpeg">
</audio>
<div class="game">
    <!-- Add this right after the <div class="game"> -->
    <div class="splash-screen">
        <div class="splash-content">
            <h1>Hisar Temizlik Mikroplara Karşı!</h1>
            <button onclick="startMainMenu()">Başla</button>
        </div>
    </div>

    <div class="start-menu">
        <div class="start-menu-content">
            <div class="music-control">
                <button class="music-toggle off" onclick="toggleMusic()">🔇 Müzik Kapalı</button>
            </div>
            <div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.8); border-radius: 5px;">
                <h3>Toplam Puan: 0</h3>
                <button onclick="showCelebrationModal()" style="margin-top:10px; padding:5px 15px; background:#FFD700; border:none; border-radius:5px; cursor:pointer;">🏆 Ödüller</button>
            </div>
            <div class="level-selection">
                <div class="level-card" onclick="startLevel(1)">
                    <h2>Bahar Yağmurları</h2>
                    <p>Bölüm 1</p>
                    <div class="stars" id="stars-1">
                        ⭐
                    </div>
                    <p style="margin-top: 5px; font-size: 0.9em;">
                        Bölüm Puanı: 0
                    </p>
                </div>
                <div class="level-card" onclick="startLevel(2)">
                    <h2>Yaz Sıcağı</h2>
                    <p>Bölüm 2</p>
                    <div class="stars" id="stars-2">
                        ⭐⭐
                    </div>
                    <p style="margin-top: 5px; font-size: 0.9em;">
                        Bölüm Puanı: 0
                    </p>
                </div>
                <div class="level-card" onclick="startLevel(3)">
                    <h2>Sonbahar Yaprakları</h2>
                    <p>Bölüm 3</p>
                    <div class="stars" id="stars-3">
                        ⭐
                    </div>
                    <p style="margin-top: 5px; font-size: 0.9em;">
                        Bölüm Puanı: 0
                    </p>
                </div>
                <div class="level-card" onclick="startLevel(4)">
                    <h2>Kış Soğuğu</h2>
                    <p>Bölüm 4</p>
                    <div class="stars" id="stars-4">
                        ⭐⭐⭐
                    </div>
                    <p style="margin-top: 5px; font-size: 0.9em;">
                        Bölüm Puanı: 0
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="pause-menu">
        <div class="pause-menu-content">
            <h2>Oyun Duraklatıldı</h2>
            <div class="music-control">
                <button class="music-toggle off" onclick="toggleMusic()">🔇 Müzik Kapalı</button>
            </div>
            <button class="menu-button" onclick="resumeGame()">Devam Et</button>
            <button class="menu-button" onclick="restartGame()">Tekrar Başlat</button>
            <button class="menu-button" onclick="returnToMainMenu()">Ana Menü</button>
        </div>
    </div>

    <button class="pause-button">⏸️</button>

    <div class="background">
        <svg class="cloud" style="top: 20%; left: 10%" width="100" height="40">
            <circle cx="20" cy="20" r="15"/>
            <circle cx="40" cy="20" r="20"/>
            <circle cx="60" cy="20" r="15"/>
        </svg>
        <svg class="cloud" style="top: 10%; left: 40%" width="100" height="40">
            <circle cx="20" cy="20" r="15"/>
            <circle cx="40" cy="20" r="20"/>
            <circle cx="60" cy="20" r="15"/>
        </svg>
        <svg class="cloud" style="top: 30%; left: 70%" width="100" height="40">
            <circle cx="20" cy="20" r="15"/>
            <circle cx="40" cy="20" r="20"/>
            <circle cx="60" cy="20" r="15"/>
        </svg>
    </div>
    
    <div class="cityscape">
        <div class="cityscape-container">
            <svg style="left: 0%" width="60" height="120">
                <rect width="60" height="120" fill="#666"/>
                <rect x="10" y="20" width="10" height="10" fill="#fff"/>
                <rect x="40" y="20" width="10" height="10" fill="#fff"/>
                <rect x="10" y="40" width="10" height="10" fill="#fff"/>
                <rect x="40" y="40" width="10" height="10" fill="#fff"/>
            </svg>
            <svg style="left: 20%" width="40" height="60">
                <polygon points="20,0 40,60 0,60" fill="#228B22"/>
                <rect x="15" y="45" width="10" height="15" fill="#8B4513"/>
            </svg>
            <svg style="left: 40%" width="60" height="100">
                <rect width="60" height="100" fill="#555"/>
                <rect x="10" y="20" width="10" height="10" fill="#fff"/>
                <rect x="40" y="20" width="10" height="10" fill="#fff"/>
            </svg>
            <svg style="left: 60%" width="40" height="60">
                <polygon points="20,0 40,60 0,60" fill="#228B22"/>
                <rect x="15" y="45" width="10" height="15" fill="#8B4513"/>
            </svg>
            <svg style="left: 80%" width="70" height="150">
                <rect width="70" height="150" fill="#777"/>
                <rect x="15" y="30" width="10" height="10" fill="#fff"/>
                <rect x="45" y="30" width="10" height="10" fill="#fff"/>
                <rect x="15" y="50" width="10" height="10" fill="#fff"/>
                <rect x="45" y="50" width="10" height="10" fill="#fff"/>
            </svg>
        </div>
        
        <div class="cityscape-container">
            <svg style="left: 0%" width="60" height="120">
                <rect width="60" height="120" fill="#666"/>
                <rect x="10" y="20" width="10" height="10" fill="#fff"/>
                <rect x="40" y="20" width="10" height="10" fill="#fff"/>
                <rect x="10" y="40" width="10" height="10" fill="#fff"/>
                <rect x="40" y="40" width="10" height="10" fill="#fff"/>
            </svg>
            <svg style="left: 20%" width="40" height="60">
                <polygon points="20,0 40,60 0,60" fill="#228B22"/>
                <rect x="15" y="45" width="10" height="15" fill="#8B4513"/>
            </svg>
            <svg style="left: 40%" width="60" height="100">
                <rect width="60" height="100" fill="#555"/>
                <rect x="10" y="20" width="10" height="10" fill="#fff"/>
                <rect x="40" y="20" width="10" height="10" fill="#fff"/>
            </svg>
            <svg style="left: 60%" width="40" height="60">
                <polygon points="20,0 40,60 0,60" fill="#228B22"/>
                <rect x="15" y="45" width="10" height="15" fill="#8B4513"/>
            </svg>
            <svg style="left: 80%" width="70" height="150">
                <rect width="70" height="150" fill="#777"/>
                <rect x="15" y="30" width="10" height="10" fill="#fff"/>
                <rect x="45" y="30" width="10" height="10" fill="#fff"/>
                <rect x="15" y="50" width="10" height="10" fill="#fff"/>
                <rect x="45" y="50" width="10" height="10" fill="#fff"/>
            </svg>
        </div>
    </div>

    <div class="score">Puan: <span id="scoreValue">0</span></div>
    <div class="character">
        <div class="company-name">Hisar Temizlik</div>
    </div>
    <div class="ground">
        <div class="road-lines">
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
            <div class="road-line"></div>
        </div>
    </div>
</div>

<div class="shoot-control">
    <button class="control-btn shoot-btn">💨</button>
</div>

<div class="mobile-controls">
    <div class="control-row">
        <button class="control-btn up-btn">↑</button>
    </div>
    <div class="control-row">
        <button class="control-btn down-btn">↓</button>
    </div>
</div>

<div class="modal">
    <h2>Oyun Bitti!</h2>
    <p>Puanınız: <span id="finalScore">0</span></p>
    <button onclick="restartGame()">Tekrar Başlat</button>
</div>

<div class="level-start-modal">
    <h2>Bölüm Başlıyor!</h2>
    <p><span id="levelName">Bahar Yağmurları</span> için hazırlan</p>
    <button onclick="closeLevelStartModal()">Başla</button>
</div>

<script>
let isGameStarted = false;
let isPaused = false;
let characterBottom = 0;
const MOVE_STEP = 10;

const character = document.querySelector('.character');
const game = document.querySelector('.game');
const modal = document.querySelector('.modal');
const scoreElement = document.getElementById('scoreValue');
const finalScoreElement = document.getElementById('finalScore');
let gameActive = false;
let score = 0;
let spawnInterval;
let currentLevel = 1;
let levelTime = 120; // 120 seconds
let levelTimer;
let weatherInterval;

let isMusicPlaying = false;

const levels = {
    1: { season: 'spring', name: 'Bahar Yağmurları' },
    2: { season: 'summer', name: 'Yaz Sıcağı' },
    3: { season: 'fall', name: 'Sonbahar Yaprakları' },
    4: { season: 'winter', name: 'Kış Soğuğu' }
};

// Add this function before startMainMenu()
function updateStartMenu() {
    // Update total score display
    const totalScore = getTotalScore();
    const totalScoreDisplay = document.querySelector('.start-menu-content h3');
    totalScoreDisplay.textContent = `Toplam Puan: ${totalScore}`;
    
    // Update level cards with stored scores and stars
    for (let i = 1; i <= 4; i++) {
        const score = parseInt(localStorage.getItem(`level${i}Score`) || 0);
        const starsElement = document.querySelector(`#stars-${i}`);
        const scoreElement = starsElement.parentElement.querySelector('p');
        
        // Update stars based on score
        const stars = score >= 300 ? 3 : score >= 100 ? 2 : score > 0 ? 1 : 0;
        starsElement.innerHTML = '⭐'.repeat(stars);
        
        // Update score display
        scoreElement.textContent = `Bölüm Puanı: ${score}`;
    }
}

function clearTimer() {
    clearInterval(levelTimer);
    const existingTimer = document.querySelector('div[style*="position: fixed"][style*="top: 20px"][style*="left: 50%"]');
    if (existingTimer) {
        existingTimer.remove();
    }
}

function getStoredStars(level) {
    const score = localStorage.getItem(`level${level}Score`) || 0;
    const stars = score >= 300 ? 3 : score >= 100 ? 2 : score > 0 ? 1 : 0;
    return '⭐'.repeat(stars);
}

// Add this function to calculate total score
function getTotalScore() {
    let totalScore = 0;
    for (let i = 1; i <= 4; i++) {
        totalScore += parseInt(localStorage.getItem(`level${i}Score`) || 0);
    }
    return totalScore;
}

// Function to check if all levels are complete with 3 stars
function checkAllLevelsComplete() {
    let allComplete = true;
    for (let i = 1; i <= 4; i++) {
        const score = parseInt(localStorage.getItem(`level${i}Score`) || 0);
        if (score < 300) { // 300 points needed for 3 stars
            allComplete = false;
            break;
        }
    }
    return allComplete;
}

// Function to generate random discount code
function generateDiscountCode() {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let code = 'HT'; // Hisar Temizlik prefix
    for (let i = 0; i < 6; i++) {
        code += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return code;
}

// Function to show celebration modal
function showCelebrationModal() {
    const discountCode = generateDiscountCode();
    const celebrationModal = document.createElement('div');
    celebrationModal.className = 'celebration-modal';
    celebrationModal.innerHTML = `
        <div class="celebration-content">
            <button class="close-button" onclick="closeCelebrationModal()" 
                    style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:20px; cursor:pointer;">✖️</button>
            <h2 style="margin-bottom:20px">🎉 Tebrikler! 🎉</h2>
            <p style="margin-bottom:15px">Tüm bölümleri 3 yıldızla tamamladınız!</p>
            <h3 style="color:#2ecc71">Hisar Temizlik'ten %30 indirim kazandınız!</h3>
            <div class="discount-code">
                ${discountCode}
            </div>
            <button class="whatsapp-button" onclick="sendToWhatsApp('${discountCode}')" 
                    style="background:#25D366; color:white; border:none; padding:15px 30px; border-radius:8px; font-size:16px; cursor:pointer; margin-top:10px;">
                İndirimi Kullan
            </button>
        </div>
    `;
    document.body.appendChild(celebrationModal);
}

// Add this function to close celebration modal
function closeCelebrationModal() {
    const modal = document.querySelector('.celebration-modal');
    modal.remove();
    // Return to main menu if not already there
    if (!document.querySelector('.start-menu').style.display === 'flex') {
        returnToMainMenu();
    }
}

function showLevelSuccess() {
    gameActive = false;
    const stars = score >= 300 ? 3 : score >= 100 ? 2 : score > 0 ? 1 : 0;
    localStorage.setItem(`level${currentLevel}Score`, score); // Store the score

    // Check if all levels are complete with 3 stars
    if (checkAllLevelsComplete()) {
        showCelebrationModal();
    }

    const successModal = document.createElement('div');
    successModal.className = 'success-modal';
    successModal.innerHTML = `
        <h2>Bölüm ${currentLevel} Tamamlandı!</h2>
        <p>Puan: ${score}</p>
        <div class="stars">
            ${Array(stars).fill('⭐').join('')}
        </div>
        ${currentLevel < 4 ? `<button onclick="transitionToNextLevel(${currentLevel + 1})">Sonraki Bölüm</button>` : ''}
        <button onclick="restartLevel()">Tekrar Dene</button>
        <button onclick="returnToMainMenu()">Ana Menü</button>
    `;
    document.body.appendChild(successModal);
    successModal.style.display = 'block';
}

function startLevel(level) {
    clearTimer();
    currentLevel = level;

    // Hide start menu explicitly 
    document.querySelector('.start-menu').style.display = 'none';

    // Display level start modal
    document.getElementById('levelName').textContent = levels[level].name;
    document.querySelector('.level-start-modal').style.display = 'block';
    
    // Clear any existing elements
    document.querySelectorAll('.enemy, .bubble').forEach(el => el.remove());
    
    // Reset character position if needed
    const character = document.querySelector('.character');
    character.style.left = '20px';
    character.style.bottom = '0px';
    
    // Update game class for season
    document.querySelector('.game').className = `game ${levels[level].season}`;
}

function closeLevelStartModal() {
    document.querySelector('.level-start-modal').style.display = 'none';
    // Start game systems
    startGame();
    startWeatherEffect(levels[currentLevel].season);
    startLevelTimer();
}

function startLevelTimer() {
    let timeLeft = levelTime;
    const timerElement = document.createElement('div');
    timerElement.style.position = 'fixed';
    timerElement.style.top = '20px';
    timerElement.style.left = '50%';
    timerElement.style.transform = 'translateX(-50%)';
    timerElement.style.fontSize = '24px';
    timerElement.style.color = '#333';
    timerElement.style.background = 'rgba(255, 255, 255, 0.8)';
    timerElement.style.padding = '10px';
    timerElement.style.borderRadius = '5px';
    timerElement.style.zIndex = '1000';
    document.body.appendChild(timerElement);

    // Update timer display initially
    timerElement.textContent = `Süre: ${timeLeft}sn`;

    levelTimer = setInterval(() => {
        if (!isPaused && gameActive) { // Only countdown if game is not paused
            timeLeft--;
            timerElement.textContent = `Süre: ${timeLeft}sn`;
            if (timeLeft <= 0) {
                clearInterval(levelTimer);
                showLevelSuccess();
            }
        }
    }, 1000);
}

function showLevelSuccess() {
    gameActive = false;
    const stars = score >= 300 ? 3 : score >= 100 ? 2 : score > 0 ? 1 : 0;
    localStorage.setItem(`level${currentLevel}Score`, score); // Store the score

    // Check if all levels are complete with 3 stars
    if (checkAllLevelsComplete()) {
        showCelebrationModal();
    }

    const successModal = document.createElement('div');
    successModal.className = 'success-modal';
    successModal.innerHTML = `
        <h2>Bölüm ${currentLevel} Tamamlandı!</h2>
        <p>Puan: ${score}</p>
        <div class="stars">
            ${Array(stars).fill('⭐').join('')}
        </div>
        ${currentLevel < 4 ? `<button onclick="transitionToNextLevel(${currentLevel + 1})">Sonraki Bölüm</button>` : ''}
        <button onclick="restartLevel()">Tekrar Dene</button>
        <button onclick="returnToMainMenu()">Ana Menü</button>
    `;
    document.body.appendChild(successModal);
    successModal.style.display = 'block';
}

// Add this new function to handle WhatsApp sharing
function sendToWhatsApp(discountCode) {
    const message = encodeURIComponent(`Hisar Temizlik'ten indirim kazandım! İndirim kodum: ${discountCode}`);
    const whatsappURL = `https://wa.me/905534040235?text=${message}`;
    window.open(whatsappURL, '_blank');
}

function transitionToNextLevel(nextLevel) {
    // Remove success modal
    const successModal = document.querySelector('.success-modal');
    successModal.remove();
    
    // Create and add transition overlay
    const transition = document.createElement('div');
    transition.className = 'level-transition';
    game.appendChild(transition);
    
    // Force reflow
    transition.offsetHeight;
    
    // Fade in overlay
    transition.classList.add('active');
    
    // Add transition class to character
    const character = document.querySelector('.character');
    character.classList.add('transition');
    
    // Move character off screen
    character.style.left = window.innerWidth + 'px';
    
    // Remove all enemies and bubbles
    document.querySelectorAll('.enemy, .bubble').forEach(el => el.remove());
    
    // Wait for animation to complete then start next level
    setTimeout(() => {
        // Reset character position
        character.classList.remove('transition');
        character.style.left = '20px';
        character.style.bottom = '0px';
        
        // Remove transition overlay
        transition.remove();
        
        // Start next level
        startLevel(nextLevel);
    }, 2000);
}

// Modify startLevel function to ensure clean state
function startLevel(level) {
    clearTimer();
    currentLevel = level;
    
    // Hide start menu explicitly 
    document.querySelector('.start-menu').style.display = 'none';
    
    // Display level start modal
    document.getElementById('levelName').textContent = levels[level].name;
    document.querySelector('.level-start-modal').style.display = 'block';
    
    // Clear any existing elements
    document.querySelectorAll('.enemy, .bubble').forEach(el => el.remove());
    
    // Reset character position if needed
    const character = document.querySelector('.character');
    character.style.left = '20px';
    character.style.bottom = '0px';
    
    // Update game class for season
    document.querySelector('.game').className = `game ${levels[level].season}`;
}

function startWeatherEffect(season) {
    clearInterval(weatherInterval);
    const weather = document.createElement('div');
    weather.className = 'weather';
    game.appendChild(weather);

    switch(season) {
        case 'spring':
            weatherInterval = setInterval(() => createRain(weather), 100);
            break;
        case 'summer':
            const sun = document.createElement('div');
            sun.className = 'sun';
            weather.appendChild(sun);
            break;
        case 'fall':
            // Reduced frequency of leaf creation from 200ms to 500ms
            weatherInterval = setInterval(() => createLeaves(weather), 500);
            break;
        case 'winter':
            weatherInterval = setInterval(() => createSnow(weather), 200);
            break;
    }
}

function createRain(container) {
    const drop = document.createElement('div');
    drop.className = 'rain-drop';
    drop.style.left = Math.random() * 100 + '%';
    container.appendChild(drop);
    setTimeout(() => drop.remove(), 1000);
}

function createSnow(container) {
    const flake = document.createElement('div');
    flake.className = 'snow-flake';
    flake.style.left = Math.random() * 100 + '%';
    container.appendChild(flake);
    setTimeout(() => flake.remove(), 3000);
}

function createLeaves(container) {
    const leaf = document.createElement('div');
    leaf.className = 'leaf';
    leaf.style.left = Math.random() * 100 + '%';
    
    // Add SVG leaf with random color
    const colors = ['#8B4513', '#A0522D', '#CD853F', '#D2691E', '#DEB887'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    
    leaf.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 100 100">
            <path d="M50 0 C20 15, 20 50, 50 60 C80 50, 80 15, 50 0" 
                  fill="${randomColor}" />
            <path d="M50 60 C45 70, 45 85, 50 100 C55 85, 55 70, 50 60"
                  fill="${randomColor}" />
        </svg>
    `;
    
    container.appendChild(leaf);
    
    // Remove leaf after animation completes
    setTimeout(() => leaf.remove(), 6000); // Match with animation duration
}

function restartLevel() {
    clearTimer(); // Clear existing timer
    document.querySelector('.success-modal').remove();
    startLevel(currentLevel);
}

// Existing functions
function startGame() {
    document.querySelector('.start-menu').style.display = 'none';
    isGameStarted = true;
    gameActive = true;
    score = 0;
    scoreElement.textContent = '0';
    spawnEnemies();
}

function pauseGame() {
    if (!isGameStarted) return;
    isPaused = true;
    gameActive = false;
    document.querySelector('.pause-menu').style.display = 'flex';
}

function resumeGame() {
    isPaused = false;
    gameActive = true;
    document.querySelector('.pause-menu').style.display = 'none';
    spawnEnemies();
}

function returnToMainMenu() {
    clearTimer(); 
    clearInterval(weatherInterval);
    document.querySelector('.weather')?.remove();
    document.querySelector('.success-modal')?.remove();
    
    isPaused = false;
    isGameStarted = false;
    gameActive = false;
    score = 0;
    scoreElement.textContent = '0';
    document.querySelector('.pause-menu').style.display = 'none';
    document.querySelector('.start-menu').style.display = 'flex';
    document.querySelectorAll('.enemy, .bubble').forEach(element => element.remove());
    character.style.left = '20px';
    character.style.bottom = '0px';
    updateStartMenu();
}

// Modify restartGame function
function restartGame() {
    character.classList.remove('exploding'); // Remove explosion effect
    clearTimer(); // Clear existing timer
    isPaused = false;
    gameActive = true;
    score = 0;
    scoreElement.textContent = '0';
    modal.style.display = 'none';
    document.querySelector('.pause-menu').style.display = 'none';
    document.querySelectorAll('.enemy, .bubble').forEach(element => element.remove());
    character.style.left = '20px';
    character.style.bottom = '0px';
    
    // Resume all animations
    document.querySelectorAll('.enemy, .road-lines, .cityscape, .background, .cloud, .weather').forEach(element => {
        element.style.animationPlayState = 'running';
    });
    
    startLevelTimer(); // Restart the timer
    spawnEnemies();
}

function gameOver() {
    gameActive = false;
    clearInterval(spawnInterval);
    clearInterval(weatherInterval);
    clearInterval(levelTimer);
    
    // Stop all animations
    document.querySelectorAll('.enemy, .road-lines, .cityscape, .background, .cloud, .weather').forEach(element => {
        element.style.animationPlayState = 'paused';
    });
    
    // Add explosion effect to character
    character.classList.add('exploding');
    
    // Play lose sound effect
    const loseSound = document.getElementById('loseSound');
    loseSound.currentTime = 0;
    loseSound.play();

    // Show game over modal after explosion animation
    setTimeout(() => {
        modal.style.display = 'block';
        finalScoreElement.textContent = score;
    }, 1000);
}

function shootBubble() {
    if (!gameActive || isPaused) return;
    
    // Play laser sound
    const laserSound = document.getElementById('laserSound');
    laserSound.currentTime = 0; // Reset sound to start
    laserSound.play();
    
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    const characterRect = character.getBoundingClientRect();
    
    const characterBottom = parseInt(window.getComputedStyle(character).bottom);
    
    bubble.style.left = (characterRect.right - 10) + 'px'; 
    bubble.style.bottom = characterBottom + 30 + 'px'; 
    game.appendChild(bubble);
    
    let position = characterRect.right - 10;
    
    function moveBubble() {
        if (!gameActive || isPaused) {
            bubble.remove();
            return;
        }
        
        position += 10;
        bubble.style.left = position + 'px';
        
        const bubbleRect = bubble.getBoundingClientRect();
        const enemies = document.querySelectorAll('.enemy');
        
        enemies.forEach(enemy => {
            const enemyRect = enemy.getBoundingClientRect();
            if (bubbleRect.left < enemyRect.right &&
                bubbleRect.right > enemyRect.left &&
                bubbleRect.top < enemyRect.bottom &&
                bubbleRect.bottom > enemyRect.top) {
                enemy.classList.add('destroyed');
                setTimeout(() => enemy.remove(), 300);
                bubble.remove();
                score += 10;
                scoreElement.textContent = score;
                return;
            }
        });
        
        if (position > window.innerWidth) {
            bubble.remove();
            return;
        }
        
        requestAnimationFrame(moveBubble);
    }
    
    moveBubble();
}

character.addEventListener('click', () => {
    if (gameActive && !isPaused) {
        shootBubble();
    }
});

document.addEventListener('touchmove', (e) => {
    if (e.target.classList.contains('control-btn')) {
        e.preventDefault();
    }
}, { passive: false });

const shootBtn = document.querySelector('.shoot-btn');

shootBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    if (gameActive) {
        shootBubble();
    }
});

shootBtn.addEventListener('click', (e) => {
    if (gameActive) {
        shootBubble();
    }
});

function createEnemy() {
    if (!gameActive || isPaused) return;
    
    const enemy = document.createElement('div');
    enemy.className = 'enemy';
    
    const monsterType = Math.floor(Math.random() * 4);
    
    const monsterDesigns = [
        `<svg viewBox="0 0 40 40">
            <circle cx="20" cy="20" r="20" fill="#8B0000"/>
            <circle cx="15" cy="15" r="5" fill="white"/>
            <circle cx="25" cy="15" r="5" fill="white"/>
            <path d="M10 25 Q20 35 30 25" stroke="white" fill="none" stroke-width="2"/>
        </svg>`,
        `<svg viewBox="0 0 40 40">
            <path d="M5 20 Q20 40 35 20 Q35 5 20 5 Q5 5 5 20" fill="#2ecc71"/>
            <circle cx="15" cy="15" r="3" fill="black"/>
            <circle cx="25" cy="15" r="3" fill="black"/>
            <path d="M15 25 Q20 20 25 25" stroke="black" fill="none" stroke-width="2"/>
        </svg>`,
        `<svg viewBox="0 0 40 40">
            <polygon points="20,0 5,20 20,40 35,20" fill="#9b59b6"/>
            <circle cx="15" cy="20" r="3" fill="white"/>
            <circle cx="25" cy="20" r="3" fill="white"/>
            <line x1="15" y1="25" x2="25" y2="25" stroke="white" stroke-width="2"/>
        </svg>`,
        `<svg viewBox="0 0 40 40">
            <path d="M5 20 Q5 5 20 5 Q35 5 35 20 Q35 35 20 35 L5 40 L10 35 Q5 35 5 20" fill="#f1c40f"/>
            <circle cx="15" cy="15" r="4" fill="black"/>
            <circle cx="25" cy="15" r="4" fill="black"/>
            <path d="M15 25 Q20 28 25 25" stroke="black" fill="none" stroke-width="2"/>
        </svg>`
    ];
    
    enemy.innerHTML = monsterDesigns[monsterType];
    game.appendChild(enemy);
    
    let position = window.innerWidth;
    const speed = 1 + Math.random() * 1; 
    const verticalPosition = Math.random() * 100; 
    enemy.style.bottom = `${verticalPosition}px`;
    
    function moveEnemy() {
        if (!gameActive || isPaused) return;
        
        if (position < -50) {
            enemy.remove();
            return;
        }
        
        position -= speed;
        enemy.style.left = position + 'px';
        
        const characterRect = character.getBoundingClientRect();
        const enemyRect = enemy.getBoundingClientRect();
        
        if (characterRect.left < enemyRect.right &&
            characterRect.right > enemyRect.left &&
            characterRect.top < enemyRect.bottom &&
            characterRect.bottom > enemyRect.top) {
            gameOver();
            return;
        }
        
        if (gameActive) {
            requestAnimationFrame(moveEnemy);
        }
    }
    
    moveEnemy();
}

function spawnEnemies() {
    if (spawnInterval) clearInterval(spawnInterval);
    spawnInterval = setInterval(() => {
        if (gameActive && !isPaused) {
            createEnemy();
        }
    }, 3000);
}

document.querySelector('.pause-button').addEventListener('click', pauseGame);

document.addEventListener('keydown', (event) => {
    if (!gameActive || isPaused) return;
    
    switch(event.key) {
        case 'ArrowUp':
            characterBottom = Math.min(characterBottom + MOVE_STEP, window.innerHeight - 180);
            character.style.bottom = characterBottom + 'px';
            break;
        case 'ArrowDown':
            characterBottom = Math.max(characterBottom - MOVE_STEP, 0);
            character.style.bottom = characterBottom + 'px';
            break;
    }
});

const upBtn = document.querySelector('.up-btn');
const downBtn = document.querySelector('.down-btn');

// Up button touch events
upBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    function moveUp() {
        if (!gameActive || isPaused) return;
        characterBottom = Math.min(characterBottom + MOVE_STEP, window.innerHeight - 180);
        character.style.bottom = characterBottom + 'px';
        upBtn.timeoutId = setTimeout(moveUp, 50);
    }
    moveUp();
});

upBtn.addEventListener('touchend', () => {
    clearTimeout(upBtn.timeoutId);
});

upBtn.addEventListener('mousedown', (e) => {
    e.preventDefault();
    function moveUp() {
        if (!gameActive || isPaused) return;
        characterBottom = Math.min(characterBottom + MOVE_STEP, window.innerHeight - 180);
        character.style.bottom = characterBottom + 'px';
        upBtn.timeoutId = setTimeout(moveUp, 50);
    }
    moveUp();
});

upBtn.addEventListener('mouseup', () => {
    clearTimeout(upBtn.timeoutId);
});

// Down button touch events
downBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    function moveDown() {
        if (!gameActive || isPaused) return;
        characterBottom = Math.max(characterBottom - MOVE_STEP, 0);
        character.style.bottom = characterBottom + 'px';
        downBtn.timeoutId = setTimeout(moveDown, 50);
    }
    moveDown();
});

downBtn.addEventListener('touchend', () => {
    clearTimeout(downBtn.timeoutId);
});

downBtn.addEventListener('mousedown', (e) => {
    e.preventDefault();
    function moveDown() {
        if (!gameActive || isPaused) return;
        characterBottom = Math.max(characterBottom - MOVE_STEP, 0);
        character.style.bottom = characterBottom + 'px';
        downBtn.timeoutId = setTimeout(moveDown, 50);
    }
    moveDown();
});

downBtn.addEventListener('mouseup', () => {
    clearTimeout(downBtn.timeoutId);
});

document.addEventListener('DOMContentLoaded', () => {
    // Show splash screen, hide start menu initially
    document.querySelector('.splash-screen').style.display = 'flex';
    document.querySelector('.start-menu').style.display = 'none';
    gameActive = false;
});

function toggleMusic() {
  const music = document.getElementById('backgroundMusic');
  const menuToggle = document.querySelector('.start-menu .music-toggle');
  const pauseToggle = document.querySelector('.pause-menu .music-toggle');
  
  if (isMusicPlaying) {
    music.pause();
    isMusicPlaying = false;
    menuToggle.classList.add('off');
    pauseToggle.classList.add('off');
    menuToggle.innerHTML = '🔇 Müzik Kapalı';
    pauseToggle.innerHTML = '🔇 Müzik Kapalı';
  } else {
    // Load and play the music
    music.load(); // Ensure the music is loaded
    music.play().catch(error => console.log("Music playback failed:", error));
    isMusicPlaying = true;
    menuToggle.classList.remove('off');
    pauseToggle.classList.remove('off');
    menuToggle.innerHTML = '🔊 Müzik Açık';
    pauseToggle.innerHTML = '🔊 Müzik Açık';
  }
}

function startMainMenu() {
    document.querySelector('.splash-screen').style.display = 'none';
    document.querySelector('.start-menu').style.display = 'flex';
    updateStartMenu();
    updateLevelCardBackgrounds(); // Add this line
}

// Add this function to update level card backgrounds
function updateLevelCardBackgrounds() {
    const levelCards = document.querySelectorAll('.level-card');
    
    levelCards.forEach((card, index) => {
        switch(index + 1) {
            case 1: // Spring - Rainy
                card.style.background = `linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="100%" height="100%" fill="%2387CEEB"/><path d="M20,50 Q50,20 80,50 T140,50" fill="white" /><path d="M0,90 L10,100 L20,90 L30,100 L40,90" stroke="%23B8D7E9" stroke-width="2" fill="none"/></svg>')`;
                break;
            case 2: // Summer - Sunny
                card.style.background = `linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="100%" height="100%" fill="%23FF8C00"/><circle cx="100" cy="100" r="40" fill="%23FFD700"/><path d="M100,40 L100,20 M160,100 L180,100 M40,100 L20,100 M100,160 L100,180" stroke="%23FFD700" stroke-width="4"/></svg>')`;
                break;
            case 3: // Fall - Leaves
                card.style.background = `linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="100%" height="100%" fill="%23D2691E"/><path d="M50,50 Q75,25 100,50 T150,50" fill="%238B4513"/><path d="M30,100 Q55,75 80,100 T130,100" fill="%23A0522D"/></svg>')`;
                break;
            case 4: // Winter - Snowy
                card.style.background = `linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), 
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect width="100%" height="100%" fill="%23B0C4DE"/><circle cx="50" cy="50" r="5" fill="white"/><circle cx="100" cy="75" r="5" fill="white"/><circle cx="150" cy="50" r="5" fill="white"/><circle cx="75" cy="125" r="5" fill="white"/><circle cx="125" cy="150" r="5" fill="white"/></svg>')`;
                break;
        }
    });
}
</script>
</body></html>
